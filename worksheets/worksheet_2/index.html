<!DOCTYPE html>
<html>

<head>
    <title>Worksheet 1</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Jakub Janaszkiewicz">
    <link rel="stylesheet" href="../../vendor/bootstrap/css/bootstrap.min.css">
    <style>
        table {
            table-layout: auto;
        }

        th {
            text-align: center;
            font-size: 150%;
        }
    </style>
</head>

<body>
    <table class="table">
        <thead>
            <th>Exercise</th>
            <th>Solution</th>
        </thead>
        <tbody>
            <tr>
                <td>
                    <h3>Part 1</h3>
                    <p>
                        <ul>
                            <li>
                                Start from your solution to Part 2 of Worksheet 1: A web application that clears the
                                canvas and then draws three points. [Angel 2.8]
                            </li>
                            <li>
                                Attach an event handler to the mouse click event and draw points on the canvas where the
                                mouse was clicked. [Angel 3.7]
                            </li>
                            <li>
                                Points are offset from the tip of the mouse cursor. This is not as desired. Get the
                                bounding rectangle of the canvas in the client area using
                                event.target.getBoundingClientRect() and correct the mouse position using the left and
                                top coordinates of this rectangle.
                            </li>
                        </ul>
                    </p>
                </td>
                <td>
                    <canvas id="canvas1" width="512" height="512">Please use a browser supporting HTML5</canvas>
                </td>
            </tr>
            <tr>
                <td>
                    <h3>Part 2</h3>
                    <p>
                        <ul>
                            <li>
                                Add a button that clears the canvas. [Angel 3.6.2]
                            </li>
                            <li>
                                Add a color selection menu where you can choose the color to be used when clearing the
                                canvas. [Angel 2.5, 3.6.3, 3.10]
                            </li>
                            <li>
                                Use a color selection menu to set the color of the drawn point when the mouse is
                                clicked. This requires updating your shaders to work with colors as in Part 3 of
                                Worksheet 1.
                            </li>
                        </ul>
                    </p>
                </td>
                <td>
                    <div id="left-2">
                        <canvas id="canvas2" width="512" height="512">Please use a browser supporting HTML5</canvas>
                    </div>
                </td>
                <td>
                    <div id="right-2">
                        <button id="clear-canvas-2" class="btn btn-warning">Clear canvas</button>
                        <select id="colors-2" size="6" style="width: 100%; margin-top: 10px;">
                            <option value="default">Default</option>
                            <option value="red">Red</option>
                            <option value="green">Green</option>
                            <option value="blue">Blue</option>
                            <option value="black">Black</option>
                            <option value="white">White</option>
                        </select>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <h3>Part 3</h3>
                    <p>
                        <ul>
                            <li>
                                We would now like to have two different drawing modes. One where we draw points as
                                before and one where we interactively build a triangle by placing three points. Add a
                                button for each drawing mode. [Angel 3.6.2]
                            </li>
                            <li>
                                (Hint) The following is closely related to the textbook CAD example [Angel 3.10], where
                                a polygon is built interactively. The main difference is that we have two drawing modes.
                            </li>
                            <li>
                                Create an empty array of point indices and an empty array of triangle indices. When
                                drawing
                                in point mode, we add vertex buffer indices of the points to the array of point indices.
                                We
                                also do this in triangle mode for the first two vertices, but with the third mouse
                                click, we
                                add the index of the first triangle vertex to the array of triangle indices and remove
                                the
                                indices of the first two vertices from the array of point indices. Use push and pop when
                                working with the arrays.
                            </li>
                            <li>
                                When rendering, draw the vertices in the array of point indices as points and draw the
                                vertices in the array of triangle indices as triangles. Try to call gl.drawArrays as few
                                times as possible.
                            </li>
                        </ul>
                    </p>
                </td>
                <td>
                    <div id="left-3">
                        <canvas id="canvas3" width="512" height="512">Please use a browser supporting HTML5</canvas>
                    </div>
                </td>
                <td>
                    <div id="right-3">
                        <button id="clear-canvas-3" class="btn btn-warning">Clear canvas</button>
                        <select id="colors-3" size="6" style="width: 100%; margin-top: 10px;">
                            <option value="default">Default</option>
                            <option value="red">Red</option>
                            <option value="green">Green</option>
                            <option value="blue">Blue</option>
                            <option value="black">Black</option>
                            <option value="white">White</option>
                        </select>
                        <button id="point-mode-3" class="btn btn-success" style="width: 100%; margin-top: 10px;">Points</button>
                        <button id="triangle-mode-3" class="btn btn-success" style="width: 100%; margin-top: 10px;">Triangles</button>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <h3>Part 4 - A rotating square</h3>
                    <p>
                        <ul>
                            <li>
                                Add a second triangle to the previous part such that you have a quadrilateral (which is
                                maybe even a square). [Angel 2.4]
                            </li>
                            <li>
                                Center your quad (short form of quadrilateral) and rotate it such that it has its
                                vertices on the coordinate axes.
                            </li>
                            <li>
                                Add a rotation so the quad rotates around its center. Animate the rotation angle over
                                time. Use requestAnimFrame to continuously call your render function. [Angel 3.1]
                            </li>
                        </ul>
                    </p>
                </td>
                <td>
                    <canvas id="canvas4" width="512" height="512">Please use a browser supporting HTML5</canvas>
                </td>
            </tr>
            <tr>
                <td>
                    <h3>Part 5 - A fan of triangles</h3>
                    <p>
                        <ul>
                            <li>
                                Create and draw a circle using the triangle fan drawing mode. [Angel 2.4.2]
                            </li>
                            <li>
                                Make the circle bounce up and down over time.
                            </li>
                        </ul>
                    </p>
                </td>
                <td>
                    <canvas id="canvas5" width="512" height="512">Please use a browser supporting HTML5</canvas>
                </td>
            </tr>
        </tbody>
    </table>

    <script type="text/javascript" src="../../common/webgl-utils.js"></script>
    <script type="text/javascript" src="../../common/initShaders.js"></script>
    <script type="text/javascript" src="../../common/MV.js"></script>

    <!-- PART 1 -->
    <script id="vertex-shader-1" type="x-shader/x-vertex">
        attribute vec2 vPosition;
        
        void main() {
            gl_Position = vec4(vPosition, 0, 1);
            gl_PointSize = 20.0;
        }
    </script>
    <script id="fragment-shader-1" type="x-shader/x-fragment">
        precision mediump float;
        
        void main() {
            gl_FragColor = vec4(0, 0, 0, 1);
        }
    </script>
    <script type="text/javascript" src="./script1.js"></script>

    <!-- PART 2 -->
    <script id="vertex-shader-2" type="x-shader/x-vertex">
        attribute vec2 vPosition;
        attribute vec3 vColor;
        varying vec3 fColor;
        
        void main() {
            gl_Position = vec4(vPosition, 0, 1);
            gl_PointSize = 20.0;
            fColor = vColor;
        }
    </script>
    <script id="fragment-shader-2" type="x-shader/x-fragment">
        precision mediump float;
        varying vec3 fColor;
        
        void main() {
            gl_FragColor = vec4(fColor, 1);
        }
    </script>
    <script type="text/javascript" src="./script2.js"></script>

    <!-- PART 3 -->
    <script id="vertex-shader-3" type="x-shader/x-vertex">
        attribute vec2 vPosition;
        attribute vec3 vColor;
        varying vec3 fColor;
        
        void main() {
            gl_Position = vec4(vPosition, 0, 1);
            gl_PointSize = 20.0;
            fColor = vColor;
        }
    </script>
    <script id="fragment-shader-3" type="x-shader/x-fragment">
        precision mediump float;
        varying vec3 fColor;
        
        void main() {
            gl_FragColor = vec4(fColor, 1);
        }
    </script>
    <script type="text/javascript" src="./script3.js"></script>

</body>

</html>